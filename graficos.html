<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráficos y Filtros</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.17.4/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container mt-5">
        <!-- Botón para regresar a la página principal -->
        <div class="text-start mb-4">
            <a href="index.html" class="btn btn-success btn-lg">
                <i class="fas fa-arrow-left"></i> <h7>Regresar al Registro</h7>
            </a>
        </div>

        <h1 class="text-center mb-4">Gráficos y Filtros</h1>

        <form id="newExerciseForm">
            <div id="fecha" class="border p-3 rounded">
                <h4>Selección de Fecha</h4>
                <!-- Checkbox para Fecha Única -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="fechaUnicaCheckbox">
                    <label class="form-check-label" for="fechaUnicaCheckbox">Fecha única</label>
                </div>
                <!-- Checkbox para Rango de Fecha -->
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="rangoFechaCheckbox">
                    <label class="form-check-label" for="rangoFechaCheckbox">Rango de fecha</label>
                </div>
    
                <!-- Contenedor para Fecha Única -->
                <div id="fechaUnicaContainer" class="mt-3 hidden">
                    <label for="fechaUnica">Selecciona una fecha:</label>
                    <input type="date" class="form-control" id="fechaUnica">
                </div>
    
                <!-- Contenedor para Rango de Fecha -->
                <div id="rangoFechaContainer" class="mt-3 hidden">
                    <label for="fechaInicio">Fecha de inicio:</label>
                    <input type="date" class="form-control" id="fechaInicio">
                    <label for="fechaFin" class="mt-2">Fecha de fin:</label>
                    <input type="date" class="form-control" id="fechaFin">
                </div>
            </div>
    
            <div class="row mt-4">
                <div class="col-md-6">
                    <label for="muscleGroup" class="form-label">Grupo Muscular:</label>
                    <select class="form-select" id="newmuscleGroup" required>
                        <option>Selecciona una opcion:</option>
                        <option value="Pecho - Hombro - Triceps">Pecho - Hombro - Triceps</option>
                        <option value="Espalda - Biceps">Espalda - Biceps</option>
                        <option value="Hombro - Biceps - Triceps">Hombro - Biceps - Triceps</option>
                        <option value="Piernas - Cuadriceps">Piernas - Cuadriceps</option>
                        <option value="Piernas - Femorales">Piernas - Femorales</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="exercise" class="form-label">Ejercicio:</label>
                    <select class="form-control" id="newexercise" disabled required>
                        <option value=''>Selecciona un ejercicio</option>
                    </select>
                    <div id="exerciseError" class="text-danger mt-1" style="display: none;">
                        El campo Ejercicio no puede estar vacío.
                    </div>
                </div>
            </div>
        </form>
        

        <!-- Contenedor para el botón de filtrado -->
        <div class="containerfiltro mt-0"></div>
        
        <div class="row mt-5 hidden" id="containerGrafico">
            <div class="col-md-6">
                <h3>Gráfico de Barras (Series y Repeticiones)</h3>
                <canvas id="barChart"></canvas>
            </div>
            <div class="col-md-6">
                <h3>Gráfico de Líneas (Series y Repeticiones)</h3>
                <canvas id="lineChart"></canvas>
            </div>
        </div>

        <div class="row mt-5 hidden" id="containerGraficoPlus">
            <div class="col-md-6">
                <h3>Gráfico de Barras (Max por día)</h3>
                <canvas id="barChartReps"></canvas>
            </div>
            <div class="col-md-6">
                <h3>Gráfico de Líneas (Max por día)</h3>
                <canvas id="lineChartPeso"></canvas>
            </div>
        </div>

        <div class="row mt-5 hidden" id="containerTable">
            <div class="col-md-12">
                <h3>Resultados de la Consulta</h3>
                <table id="resultTable" class="table table-bordered">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Grupo muscular</th>
                            <th>Ejercicio</th>
                            <th>Series</th>
                            <th>Repeticiones</th>
                            <th>Peso (kg)</th>
                            <th>Notas</th>
                            <th>Dropset</th> 
                            <th>Dropset Cantidad</th>
                            <th>Dropset Detalle</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Las filas se llenarán dinámicamente con JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        </br>
        <div class="col-md-8">
            <!-- Botón de Limpiar Formulario -->
            <button type="button" id="newlimpiarFormulario" class="btn btn-secondary">Limpiar Formulario</button>
            <!-- Botón de Exportar a Excel -->
            <button type="button" id="exportarExcel" class="btn btn-success hidden">Exportar a Excel</button>
       </div>
    </div>

    <!-- Bootstrap JS y dependencias -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <script type="module" src="graficos.js"></script>
</body>
</html>